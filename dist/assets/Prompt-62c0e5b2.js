import{d as g,a0 as w,h as d,a3 as C,r as x,B as N,F as B,X as r,U as u,D as e,aY as P,ah as R,W as S,Q as b,P as I,N as _,ad as k,aX as U,aZ as z}from"./index-236601ca.js";const D=g({__name:"Prompt",props:{visible:{type:Boolean},roomId:null},emits:["update:visible"],setup(m,{emit:f}){var c;const i=m,v=w(),t=d(()=>v.getChatHistoryByCurrentActive),p=C(),l=x(!1),h=`Prompt For [${(c=t.value)==null?void 0:c.title}]`,s=d({get(){return i.visible},set(a){f("update:visible",a)}});async function y(){if(!(!t.value||!t.value)){l.value=!0;try{const{message:a}=await z(t.value.prompt??"",+i.roomId);p.success(a),s.value=!1}catch(a){p.error(a.message)}l.value=!1}}return(a,o)=>(N(),B(e(U),{show:e(s),"onUpdate:show":o[1]||(o[1]=n=>k(s)?s.value=n:null),"auto-focus":!1,class:"custom-card",preset:"card",style:{width:"600px"},title:h,size:"huge",bordered:!1},{footer:r(()=>[u(e(P),{justify:"end"},{default:r(()=>[u(e(R),{loading:l.value,type:"success",onClick:y},{default:r(()=>[S(b(e(I)("common.save")),1)]),_:1},8,["loading"])]),_:1})]),default:r(()=>[u(e(_),{value:e(t)&&e(t).prompt,type:"textarea",autosize:{minRows:4,maxRows:10},placeholder:"Prompt for this room, If empty will use Settings ->  Advanced -> Role",onInput:o[0]||(o[0]=n=>{e(t)&&(e(t).prompt=n)})},null,8,["value"])]),_:1},8,["show"]))}});export{D as default};
